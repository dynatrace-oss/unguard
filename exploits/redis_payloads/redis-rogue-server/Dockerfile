FROM python:3.7

WORKDIR /usr/src/app

RUN apt-get update \
    && apt-get install -y git build-essential \
    && rm -rf /var/lib/apt/lists/* \
    && git clone https://github.com/n0b0dyCN/RedisModules-ExecuteCommand \
    && cd RedisModules-ExecuteCommand \
    && make

COPY redis-rogue-server.py .

EXPOSE 6666

CMD [ "python", "./redis-rogue-server.py", "--lhost", "0.0.0.0", "--lport", "6666" ]
